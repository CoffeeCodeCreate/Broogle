export const getByState="https://api.openbrewerydb.org/breweries?by_state=";export const getById="https://api.openbrewerydb.org/breweries/";import{elements,renderLoader,clearLoader,renderPointer,clearPointer}from"./views/base.mjs";import Search from"./models/Search.mjs";import Likes from"./models/Likes.mjs";import Brewery from"./models/Brewery.mjs";import*as searchView from"./views/searchView.mjs";import*as likesView from"./views/likesView.mjs";const state={},controlSearch=async()=>{const e=searchView.getInput();if(e){clearPointer(),state.search=new Search(e),searchView.clearInput(),searchView.clearResults(),renderLoader(elements.parentSearchContainer);try{await state.search.getResults(),clearLoader(),renderPointer(elements.parentSearchContainer),searchView.renderResults(state.search.result)}catch(e){alert("Something went wrong!\n"+e),console.log(e)}}},controlBrewery=async()=>{const e=window.location.hash.replace("#","");if(e){state.search&&searchView.highlightSelected(e),state.brewery=new Brewery(e),console.log(state);try{await state.brewery.getInfo(),controlLike(),console.log(state.likes)}catch(e){console.log(e)}}};["hashchange","load"].forEach(e=>window.addEventListener(e,controlBrewery));const controlLike=()=>{state.likes||(state.likes=new Likes);const e=state.brewery.id;if(!state.likes.isLiked(e)){let t=`${state.brewery.info.street} ${state.brewery.info.city}, ${state.brewery.info.state} ${state.brewery.info.postal_code}`;const r=state.likes.addLike(e,state.brewery.info.name,t,state.brewery.info.phone);likesView.renderLike(r)}likesView.toggleLikeMenu()};window.addEventListener("load",()=>{state.likes=new Likes,state.likes.readStorage(),likesView.toggleLikeMenu(),state.likes.likes.forEach(e=>{likesView.renderLike(e)})}),elements.searchForm.addEventListener("submit",e=>{e.preventDefault(),controlSearch()});